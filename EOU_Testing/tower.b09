PROCEDURE TowerBASE 0RUN GFX2("DEFCOL")RUN GFX2("COLOR",0,2)SHELL "Tmode -echo -pause"RUN GFX2("CUROFF")10 DIM Z,SPC:STRING[80]12 DIM A,B,XLIN,YPOS,XPOS,NPOS,FIRSTTIME,PL,TRYS,HOLD,HOLD1,HOLD2 ,DK,CT1,CT2,LP,PL:INTEGER13 DIM RDK$(25),LDK$(25):STRING[16]14 DIM TW(10,10):INTEGERFOR A=0 TO 9 \ FOR B=0 TO 9 \TW(A,B)=0 \NEXT B \NEXT ANPOS=1615 SPC="                                                                              "20 RUN GFX2("CLEAR")120 FOR A=1 TO 9 \NEXT A130 GOSUB 1000 \ GOSUB 890 \XLIN=1 \YPOS=1140 TRYS=-1 \FIRSTTIME=0150 GOSUB 720160 TRYS=TRYS+1170 RUN GFX2("COLOR",0,2)180 GOSUB 1380190 RUN GFX2("CURXY",21,3) \ PRINT "Position Flashing Star Above Target Disk        "200 RUN GFX2("CURXY",21,4) \ PRINT "          Then Strike Enter Key                 "205 GOSUB 1350210 RUN GFX2("COLOR",3,2)220 RUN GFX2("CURXY",29,6) \ PRINT "Number Of Moves So Far "; TRYS ;  \ IF TRYS>0 THEN 270230 IF FIRSTTIME>0 THEN 270240 RUN GFX2("CURXY",15,13) \RUN GFX2("COLOR",0,2) \RUN GFX2("BLNKON" ) \ PRINT "**";  \RUN GFX2("COLOR",7,2)250 RUN GFX2("BLNKOFF") \FIRSTTIME=1260 XPOS=NPOS270 REM 280 RUN INKEY(Z) \ IF Z="" THEN 280285 RUN GFX2("CUROFF") \RUN GFX2("BLNKON")290 IF RIGHT$(Z,1)="<" OR Z=CHR$(8) THEN NPOS=XPOS-24 \ GOTO 330  \ ENDIF 300 IF RIGHT$(Z,1)=">" OR Z=CHR$(9) THEN NPOS=XPOS+24 \ GOTO 330  \ ENDIF 310 IF Z=CHR$(13) THEN RUN GFX2("BLNKOFF") \ GOTO 380 \ ENDIF 315 IF Z="Q" OR Z="q" THEN RUN GFX2("BLNKOFF") \ GOSUB 1300 \ ENDIF 320 GOTO 280330 IF NPOS<16 THEN NPOS=16 \ ENDIF 340 IF NPOS>64 THEN NPOS=64 \ ENDIF 345 RUN GFX2("COLOR",0,2)350 RUN GFX2("CURXY",XPOS-1,13) \ PRINT "  "; 360 RUN GFX2("CURXY",NPOS-1,13) \RUN GFX2("COLOR",0,2) \ PRINT "**" ;  \RUN GFX2("COLOR",7,2)370 GOTO 260380 IF NPOS=16 THEN PL=1 \ ENDIF 390 IF NPOS=40 THEN PL=2 \ ENDIF 400 IF NPOS=64 THEN PL=3 \ ENDIF 410 IF HOLD>0 THEN 500420 FOR DK=1 TO 8430 IF TW(PL,DK)>0 THEN HOLD=TW(PL,DK) \HOLD1=PL \HOLD2=DK \ GOTO 460 \ ENDIF 440 NEXT DK450 GOTO 610460 RUN GFX2("COLOR",6,2)470 RUN GFX2("CURXY",21,3) \ PRINT "Position Flashing Star Above Target Tower"480 RUN GFX2("CURXY",21,4) \ PRINT "          Then Strike Enter Key          "490 GOTO 320500 FOR DK=1 TO 8510 IF TW(PL,DK)>0 THEN 540520 NEXT DK530 GOTO 560540 IF TW(PL,DK)>HOLD THEN TW(PL,DK-1)=HOLD \ GOTO 570 \ ENDIF 550 GOTO 610560 TW(PL,DK-1)=HOLD570 HOLD=0 \TW(HOLD1,HOLD2)=0580 RUN GFX2("CURXY",0,23) \ PRINT SPC; 590 GOSUB 640600 GOTO 160610 RUN GFX2("CURXY",0,23) \ PRINT SPC;  \RUN GFX2("CURXY",23,23 ) \RUN GFX2("COLOR",0,2)620 PRINT "Invalid Move. Please Try Again.";  \HOLD=0630 FOR A=1 TO 8000 \NEXT A \RUN GFX2("CURXY",0,23) \ GOTO 170640 RUN GFX2("COLOR",12,2)650 FOR A=1 TO 3660 FOR B=1 TO 8670 RUN GFX2("CURXY",(A-1)*24+7-1,B+13) \ PRINT RDK$(TW(A,B)); 680 RUN GFX2("CURXY",(A-1)*24+18-1,B+13) \ PRINT LDK$(TW(A,B)); 690 NEXT B700 NEXT A710 RUN GFX2("COLOR",7,2) \ RETURN 720 REM *** DISPLAY FIRST STACK OF DKS ***730 B=9 \RUN GFX2("COLOR",12,2)740 FOR A=22 TO 14 STEP -1750 B=B-1770 RUN GFX2("CURXY",30,A-1) \ PRINT RDK$(TW(2,B)); 780 RUN GFX2("CURXY",30+LEN(RDK$(TW(2,B)))+2,A-1) \ PRINT LDK$(TW (2,B))790 NEXT A800 RUN GFX2("COLOR",3,2)810 RUN GFX2("CURXY",4,22) \ PRINT "************************************************************************"820 RUN GFX2("COLOR",7,2)830 FOR A=22 TO 15 STEP -1840 RUN GFX2("CURXY",15,A-1) \ PRINT "[]"850 RUN GFX2("CURXY",39,A-1) \ PRINT "[]"860 RUN GFX2("CURXY",63,A-1) \ PRINT "[]"870 NEXT A880 RETURN 890 FOR A=0 TO 8 \TW(2,A)=A \ READ RDK$(A),LDK$(A) \NEXT A900 RETURN 910 DATA "         ","         "920 DATA "       ##","##       "930 DATA "      ###","###      "940 DATA "     ####","####     "950 DATA "    #####","#####    "960 DATA "   ######","######   "970 DATA "  #######","#######  "980 DATA " ########","######## "990 DATA "#########","#########"1000 RUN GFX2("CLEAR") \RUN GFX2("COLOR",5,2)1010 RUN GFX2("CURXY",0,0) \ PRINT "################################################################################"1020 FOR A=2 TO 22 \RUN GFX2("CURXY",0,A-1) \ PRINT "#" \RUN GFX2 ("CURXY",79,A-1) \ PRINT "#" \NEXT A1030 RUN GFX2("CURXY",0,22) \ PRINT "################################################################################" ; RUN GFX2("BLNKON")1040 RUN GFX2("CURXY",23,2) \RUN GFX2("COLOR",5,2) \ PRINT "T O W E R S   O F   A T L A N T I S"RUN GFX2("BLNKOFF")1050 RUN GFX2("COLOR",0,2) \RUN GFX2("CURXY",23,7) \ PRINT "Would You Like Instructions? <Y/N>"1060 RUN INKEY(Z) \ IF Z="" THEN 10601070 IF Z="N" OR Z="n" THEN RUN GFX2("CLEAR") \ RETURN  \ ENDIF 1080 IF Z<>"Y" AND Z<>"y" THEN 10601090 RUN GFX2("COLOR",0,2) \RUN GFX2("CURXY",9,6) \ PRINT "           The game screen for Towers of Atlantis"1100 RUN GFX2("CURXY",9,7) \ PRINT "           contains three towers.   By moving one"1110 RUN GFX2("CURXY",9,8) \ PRINT "           Disk at a time,  and  never  placing a"1120 RUN GFX2("CURXY",9,9) \ PRINT "           larger disk on a smaller one, move all"1130 RUN GFX2("CURXY",9,10) \ PRINT "           disks to either of the outside towers."1150 RUN GFX2("CURXY",9,11) \ PRINT "           This may take all of two hundred fifty-"1200 RUN GFX2("CURXY",9,12) \ PRINT "           three moves."1280 RUN GFX2("CURXY",26,23) \RUN GFX2("COLOR",0,2) \ PRINT "Strike Any Key To Continue" ; 1290 RUN INKEY(Z) \ IF Z="" THEN GOTO 1290 \ ELSE RUN GFX2("CLEAR" ) \ RETURN  \ ENDIF 1300 XLIN=14 \YPOS=NPOS \RUN GFX2("CURXY",0,23) \ PRINT SPC; 1310 RUN GFX2("COLOR",0,2) \RUN GFX2("CURXY",23,23) \ PRINT "Do You Wish To Leave This Game? <Y/N>" ;  \RUN GFX2("COLOR",0,2)1320 RUN INKEY(Z) \ IF Z="" THEN 13201330 IF Z="y" OR Z="Y" THEN 15001340 IF Z<>"n" AND Z<>"N" THEN 13201350 RUN GFX2("CURXY",0,23) \ PRINT SPC;  \RUN GFX2("CURXY",23,23 ) \RUN GFX2("COLOR",3,2)1360 PRINT " Strike <Q> to leave this game ";  \RUN GFX2("COLOR" ,7,0) \RUN GFX2("CURXY",YPOS-1,XLIN-1)1370 RETURN 1380 CT1=0 \CT2=01390 FOR LP=1 TO 81400 IF TW(1,LP)>0 THEN CT1=CT1+1 \ ENDIF 1410 IF TW(3,LP)>0 THEN CT2=CT2+1 \ ENDIF 1420 NEXT LP1430 IF CT1=8 OR CT2=8 THEN 14501440 RETURN 1450 RUN GFX2("CURXY",22,9) \ PRINT "     You Made It In"; TRYS; "Moves"1460 RUN GFX2("CURXY",22,10) \ PRINT "Would You Like To Play Again? <Y/N>" ; 1470 RUN INKEY(Z) \ IF Z="" THEN 14701480 IF Z="Y" OR Z="y" THEN 1401490 IF Z<>"N" AND Z<>"n" THEN 14701500 RUN GFX2("CURON") \ SHELL "Tmode echo" \ END 